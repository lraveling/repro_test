---
title: "set up the github project like in the tutorial"
author: "Laura Raveling"
date: "5/22/2021"
format: 
  html:
    code-fold: true

repro:
    - here
    - tidyverse
    - lubridate
    - aaronpeikert/repro@fc7e884
---

create github connection with use this package
i can also recommend this tutorial <https://happygitwithr.com/>

try it with the "github first workflow"
create the repo on github, and then  proceed with different usethis functions (chapter 15 of happy git with R)

```{r}
usethis::create_from_github(
  "https://github.com/lraveling/repro_test.git",
  destdir = "C:/Users/lrave/tmp/repro_test"
)
```

check push and pull connections 

```{r}
git remote -v
```

```{r}
setwd("C:/Users/lrave/tmp")
```
```{r}
usethis::use_git_config(
  user.name = "lraveling", # <-- change to your name
  user.email = "l.raveling@posteo.net", # <-- and your email
  init.defaultBranch = "main") # <-- not necessary but kinder than 'master'
```

```{r}
usethis::use_git()
```

```{r}
usethis::create_github_token(description = "repro test no. 3")
```

PAT repro test 2 june: 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 
now set the token with (option 3)

```{r}
gitcreds::gitcreds_set()
```

verify it it worked 

```{r}
usethis::gh_token_help()
```

activate github and upload files 

```{r}
usethis::use_github()
```
```{r}
usethis::use_git_remote("origin", url = NULL, overwrite = TRUE)
```

```{r}
pacman::p_load(here, tidyverse, lubridate) 
```
```{r}
library(usethis)
path_dir = "C:/Users/lrave/Documents/"
path <- file.path(path_dir, "repro_test")
create_package(path)
proj_activate(path)
#install.packages("pacman")
#install.packages("usethis")
use_mit_license()

# <-- not necessary but kinder than 'master'
```

activate git 

```{r}
use_git()
```

activate personal access token: for now set to 4 weeks 

```{r}
usethis::create_github_token(description = "Token for Repro Test May 2025")
usethis::gh_token_help()
```

install repro to use with Docker and Make
installs from github
check if docker and make is installed on your local system
if not, follow these instructions <https://github.com/aaronpeikert/repro-tutorial/blob/main/install.md>

```{r}
install.packages("devtools")
library(devtools)
```

create the Dockerfile 

```{r}
library(repro)
automate()
```

github actions (?)


```{r}
repro::use_gha_docker()
usethis::browse_github_actions()
```

- make (?)
- i don't understand where "repro" creates the recipe for the make rule? Do you get this? 
- you need to add your own "make rule" in the Makefile
- then it works
